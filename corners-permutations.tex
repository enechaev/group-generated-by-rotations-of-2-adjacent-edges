\documentclass[utf8,a4paper,draft]{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage[]{amsmath,amssymb,textcomp,amsthm}
\usepackage{float}
\usepackage{tikz}
\newtheorem{lemma_cub}{Лемма}
\newtheorem*{def_cub}{Определение}
\title{О перестановках угловых кубиков}
\author{}
\date{}
\begin{document}
\maketitle
Будем рассматривать повороты кубиков таким образом: разделим все кубики на группы по 2~--- в каждую группу входит один кубик с верхнего ряда и кубик под ним. Рассмотрим перестановки этих групп. Всего возможно $\frac{C^2_6C^2_4}{6!}=15$ взаимных расположений этих групп без учета перестановок этих групп. Все они перечислены на рис.~\ref{possibleperms}.
\begin{figure}[h]
\centering
\begin{picture}(300,380)
	\put(5,370){\circle*{5}} \put(25,370){\circle*{5}} \put(45,370){\circle*{5}}
	\put(5,350){\circle*{5}} \put(25,350){\circle*{5}} \put(45,350){\circle*{5}}
	\put(5,350){\line(0,0){20}} \put(25,350){\line(0,0){20}} \put(45,350){\line(0,0){20}}
	\put(270,357){(0)}
	
	\put(5,320){\circle*{5}} \put(25,320){\circle*{5}} \put(45,320){\circle*{5}}
	\put(75,320){\circle*{5}} \put(95,320){\circle*{5}} \put(115,320){\circle*{5}}
	\put(5,300){\line(0,0){20}} \put(25,300){\line(1,0){20}} \put(25,320){\line(1,0){20}}
	\put(5,300){\circle*{5}} \put(25,300){\circle*{5}} \put(45,300){\circle*{5}}
	\put(75,300){\circle*{5}} \put(95,300){\circle*{5}} \put(115,300){\circle*{5}}
	\put(115,300){\line(0,0){20}} \put(95,300){\line(-1,0){20}} \put(95,320){\line(-1,0){20}}
	\put(270,317){(1 a, b)}
	
	\put(5,270){\circle*{5}} \put(25,270){\circle*{5}} \put(45,270){\circle*{5}}
	\put(75,270){\circle*{5}} \put(95,270){\circle*{5}} \put(115,270){\circle*{5}}
	\put(5,250){\line(2,1){41}} \put(25,250){\line(-1,1){20}} \put(45,250){\line(-1,1){20}}
	\put(5,250){\circle*{5}} \put(25,250){\circle*{5}} \put(45,250){\circle*{5}}
	\put(75,250){\circle*{5}} \put(95,250){\circle*{5}} \put(115,250){\circle*{5}}
	\put(115,250){\line(-2,1){41}} \put(95,250){\line(1,1){20}} \put(75,250){\line(1,1){20}}
	\put(270,257){(2 a, b)}
	
	\put(5,220){\circle*{5}} \put(25,220){\circle*{5}} \put(45,220){\circle*{5}}
	\put(5,200){\circle*{5}} \put(25,200){\circle*{5}} \put(45,200){\circle*{5}}
	\put(5,200){\line(2,1){41}} \put(45,200){\line(-2,1){41}} \put(25,200){\line(0,1){20}}
	\put(270,207){(3)}

	\put(5,170){\circle*{5}} \put(25,170){\circle*{5}} \put(45,170){\circle*{5}}
	\put(5,150){\circle*{5}} \put(25,150){\circle*{5}} \put(45,150){\circle*{5}}
	\put(5,150){\line(1,0){20}} \put(45,150){\line(-1,1){20}} \qbezier(5,170)(25,190)(45,170)
	\put(75,170){\circle*{5}} \put(95,170){\circle*{5}} \put(115,170){\circle*{5}}
	\put(75,150){\circle*{5}} \put(95,150){\circle*{5}} \put(115,150){\circle*{5}}
	\put(75,150){\line(1,1){20}} \put(95,150){\line(1,0){20}} \qbezier(75,170)(95,190)(115,170)
	\put(145,170){\circle*{5}} \put(165,170){\circle*{5}} \put(185,170){\circle*{5}}
	\put(145,150){\circle*{5}} \put(165,150){\circle*{5}} \put(185,150){\circle*{5}}
	\put(165,150){\line(-1,1){20}} \put(165,170){\line(1,0){20}} \qbezier(145,150)(165,130)(185,150)
	\put(215,170){\circle*{5}} \put(235,170){\circle*{5}} \put(255,170){\circle*{5}}
	\put(215,150){\circle*{5}} \put(235,150){\circle*{5}} \put(255,150){\circle*{5}}
	\put(215,170){\line(1,0){20}} \put(235,150){\line(1,1){20}} \qbezier(215,150)(235,130)(255,150)
	\put(270,157){(4 a, b, c, d)}
	
	\put(5,120){\circle*{5}} \put(25,120){\circle*{5}} \put(45,120){\circle*{5}}
	\put(5,100){\circle*{5}} \put(25,100){\circle*{5}} \put(45,100){\circle*{5}}
	\put(5,120){\line(2,-1){41}} \put(5,100){\line(1,0){20}} \put(25,120){\line(1,0){20}}
	\put(75,120){\circle*{5}} \put(95,120){\circle*{5}} \put(115,120){\circle*{5}}
	\put(75,100){\circle*{5}} \put(95,100){\circle*{5}} \put(115,100){\circle*{5}}
	\put(75,100){\line(2,1){41}} \put(75,120){\line(1,0){20}} \put(95,100){\line(1,0){20}}
	\put(270,107){(5 a, b)}

	\put(5,70){\circle*{5}} \put(25,70){\circle*{5}} \put(45,70){\circle*{5}}
	\put(5,50){\circle*{5}} \put(25,50){\circle*{5}} \put(45,50){\circle*{5}}
	\qbezier(5,70)(25,90)(45,70) \qbezier(5,50)(25,30)(45,50) \put(25,50){\line(0,1){20}}
	\put(270,57){(6)}
	
	\put(5,20){\circle*{5}} \put(25,20){\circle*{5}} \put(45,20){\circle*{5}}
	\put(5,0){\circle*{5}} \put(25,0){\circle*{5}} \put(45,0){\circle*{5}}
	\put(5,0){\line(0,1){20}} \put(25,0){\line(1,1){20}} \put(45,0){\line(-1,1){20}}
	\put(75,20){\circle*{5}} \put(95,20){\circle*{5}} \put(115,20){\circle*{5}}
	\put(75,0){\circle*{5}} \put(95,0){\circle*{5}} \put(115,0){\circle*{5}}
	\put(115,0){\line(0,1){20}} \put(75,0){\line(1,1){20}} \put(95,0){\line(-1,1){20}}
	\put(270,17){(7 a, b)}
\end{picture}
\caption{Взаимные расположения групп угловых кубиков\label{possibleperms}}
\end{figure}

Обозначим повороты граней на 90\textdegree~по часовой стрелке как $U$ и $L$. 
\begin{lemma_cub}
\label{lemma_states}
Взаимные расположения 5, 6, 7 недостижимы.
\end{lemma_cub}
\begin{proof}
Пусть существует состояние $M$ такое, что в него можно перейти, один раз повернув грань кубика (перестановка $K$), находящегося в одном из разрешенных состояний $N$ (мы можем рассматривать только движение одной из граней, а не композицию движений, потому что должен быть такой ''переходный момент'' когда грани переходят из $N$ в $M$ после одного поворота). Тогда $N=MK^{-1}$. Проверкой можно убедиться, что из неразрешенного состояния можно перейти только в неразрешенное.
\begin{figure}[h]
\centering
\begin{tikzpicture}[->,auto,scale=1,semithick]

\node (2b) at (1,-1) {2b};
\node (2a) at (5,-1) {2a};
\node (3) at (3,3) {3};
\node (4a) at (0,1) {4a};
\node (4d) at (2,1) {4d};
\node (4c) at (4,1) {4c};
\node (4b) at (6,1) {4b};
\node (1a) at (1,4) {1a};
\node (1b) at (5,4) {1b};
\node (0) at (3,5) {0};

\path   (0)  edge [bend left=10] node[xshift=-10pt]      {\scriptsize{$L$,$L^{-1}$}} (1a)
             edge [bend left=10] node                    {\scriptsize{$U$,$U^{-1}$}} (1b)
        (1a) edge                node[above,xshift=5pt]  {\scriptsize{$U$}}          (4d)
             edge                node[above]             {\scriptsize{$U^{-1}$}}     (4a)
             edge [bend left=20] node                    {\scriptsize{$L$,$L^{-1}$}} (0)
        (1b) edge                node[above]             {\scriptsize{$L^{-1}$}}     (4c)
             edge                node                    {\scriptsize{$L$}}          (4b)
             edge [bend left=20] node[xshift=10pt]       {\scriptsize{$U$,$U^{-1}$}} (0)
        (4a) edge                node[below]             {\scriptsize{$U^{-1}$}}     (3)
             edge                node[below]             {\scriptsize{$L$}}          (2b)
             edge                node[below]             {\scriptsize{$L^{-1}$}}     (4d)
        (4b) edge                node[below]             {\scriptsize{$L$}}          (3)
             edge                node                    {\scriptsize{$U^{-1}$}}     (2a)
        (4c) edge                node[below,xshift=-6pt] {\scriptsize{$L^{-1}$}}     (3)
             edge                node[above]             {\scriptsize{$U$}}          (2b)
             edge                node[below]             {\scriptsize{$U^{-1}$}}     (4b)
        (4d) edge                node[below,xshift=4pt]  {\scriptsize{$U$}}          (3)
             edge                node                    {\scriptsize{$L^{-1}$}}     (2a)
        (2b) edge [bend left=10] node                    {\scriptsize{$U$}}          (2a)
        (2a) edge [bend left=10] node                    {\scriptsize{$U^{-1}$}}     (2b);
\end{tikzpicture}
\caption{Граф переходов между разрешенными состояниями\label{states_graph}}
\end{figure}
В остальные состояния можно перейти из начального состояния(рис.~\ref{states_graph}).
\end{proof}
Разделим каждый класс еще на 2 подкласса: в нулевом классе в ''четном'' подклассе перестановки ''палочек''  будут четными, в ''нечетном''~--- нечетными. Для остальных классов деление таким образом: так как из любого класса можно ''попасть'', через классы 1a или 1b, элементом из ''четного'' подкласса назовем такой, что соответствующий ему элемент из класса 1a (1b), после использования движения $L$ ($U$), если вертикальная палочка направлена вниз, или $L^{-1}$ ($U^{-1}$), если вертикальная палоча направлена вверх, переходит в четную перестановку класса 0.

Для каждого из этих взаимных расположений $\frac{3!}{2}\cdot 2^3=24$ перестановок этих групп (3 перестановки этих групп в подклассе и для каждой из этих перестановок группы могуть быть ''направлены'' в разные стороны~--- можно произвольно выбрать ''ось'', и направление кубиков в начальном состоянии может совпадать с направлением в данном или нет).

Покажем, что из 24 состояний возможны только 6~--- каждой перестановке ''палочек'' соответствует только 2 способа их направления.
\begin{lemma_cub}
Для разных перестановок $a_1$, $a_2$ из подкласса 0 (назовем подклассом 0 тот подкласс класса 0, в котором есть единичная перестановка) и из одной перестановки любого класса $b$ $a_1b$ и $a_2b$~--- разные перестановки того же подкласса, что и $b$.\label{lemma_classes}
\end{lemma_cub}
\begin{proof}
Один и тот же кубик находится в разных положениях в разных перестановках из подкласса 0, поэтому он переходит в разные положения после применения одной и той же перестановки. при этом ''форма'' остается, так что эти 2 перестановки принадлежат одному и тому же подклассу, тому же, что и перестановка $b$.
\end{proof}
В подклассы с нечетными перестановками можно перейти из подкласса 0, используя движения $U^2$ или $L^2$~--- тогда мы перейдем в второй подкласс класса 0, в котором содержатся только нечетные перестановки ''палочек''.

Из леммы~\ref{lemma_classes} следует, что элементов в каждом из подклассов столько же, сколько в подклассе 0.
\begin{lemma_cub}
В подклассе 0 возможно 6 разных состояний.
\end{lemma_cub}
\begin{proof}
Докажем, что для каждой перестановки ''палочек'' возможно только 2 ориентации (одна получается из другой разворотом всех ''палочек''), то есть если перевернута одна палочка, то другие 2 тоже перевернуты.
%Заменим ''палочку'' на ''стрелочку''. Ее начало обозначает тот кубик, который был в верхнем ряду, окончание~-- тот, который был в нижнем.
Заметим, что 2-циклы, переставляющие соседние кубики, соответствуют взаимным положениям 7a, b.

Предположим, что существует движение $M$, которое соответствуют переходу в неразрешенное состояние. Также $M=M_{allowed}F$, где $M_{allowed}$~---разрешенное состояние, $F$~--- 2-цикл, то есть $M_{allowed}^{-1}M=F$. Так как состояние $F$ недостижимо, то движения $M$ не существует.
\end{proof}
Так как классов 10, подклассов 20, всего возможных состояний $20\cdot 6=120$.
Докажем, что группа, порожденная поворотами, изоморфна $S_5$.
\begin{lemma_cub}
\label{lemma4}
$\mathbb{G}_{subclass~0} \cong \mathbb{Z}_6$.
\end{lemma_cub}
\begin{proof}
Перестановка угловых кубиков
\begin{multline*}
$$
M_{corners}=L^{-1}U^{-1}L^{-1}UL^{-1}U^{-1}L^2ULU^{-1}L^2ULU^{-1}LU^2L \\
	(U^{-1}L^{-1})^2L^{-1}ULUL^{-1}U^2L^2U^2LU^{-1}LUL^2U^{-1} \\
		(U^{-1}L^{-1})^2(UL)^2UL^{-1}UL(U^{-1}L^{-1})^2UL^2U^{-1}L^{-1}UL^{-1}
$$
\end{multline*}
меняет перестановку из подкласса 0 на другую и меняет 2 центральных кубика местами. Она имеет порядок 6 и перебирает все элементы из подкласса 0, то есть является порождающим элементом группы $\mathbb{Z}_6$.
\end{proof}
В группе есть 2 элемента:
\begin{multline*} %(1,6,4,3,2)
$$
\alpha=U^{-1}L^{-1}ULU^{-1}L^{-1}UL^{-1}U^{-1}LUL^{-1}U(LU^{-1})^2L^{-1}U^{-1}L^{-1}(UL)^3L^2 \\
	U^{-1}L^{-1}UL^{-1}U^{-1}LUL^{-1}U^{-1}L^2UL^{-1}U^{-1}L^2ULU^{-1}LUL
$$
\end{multline*}
\begin{multline*} %(1,2,6,4)
$$
\beta=LU^{-1}LUL^2U^{-1}LUL^2UL^{-1}U^{-1}L(U^{-1}L^{-1})^2U^{-1}(LU)^2L^{-1}U^{-1}L^{-1}\\ 
		(L^{-1}ULU^{-1}LU)^2L^2U^{-1}L^{-1}U^{-1}(L^{-1}U)^2LU^2L(UL^{-1})^2U^{-1}
$$
\end{multline*}
Для них выполняются следующие свойства:
\begin{enumerate}
\item $\alpha^5=e$
\item $\beta^4=e$
\item $\beta\alpha\beta^{-1}=\alpha^2$
\end{enumerate}
То есть в группе поворотов содержится подгруппа $\mathbb{G}_F$, изоморфная $F_5$. Перебором можно убедиться, что каждый элемент принадлежит разным классам(табл.~\ref{elt}).
\begin{table}[h]
\begin{center}
  \begin{tabular}{| c | c |}
    \hline
    элемент & класс\\\hline
        $e$ & 0+  \\\hline
        $\alpha$ & 4b+ \\\hline
      $\alpha^2$ & 3-- \\\hline
      $\alpha^3$ & 1a--\\\hline
      $\alpha^4$ & 2b--\\\hline
        $\beta$ & 4d--\\\hline
      $\beta^2$ & 4b--\\\hline
      $\beta^3$ & 2a--\\\hline
       $\alpha\beta$ & 2a+ \\\hline
     $\alpha^2\beta$ & 1b--\\\hline
     $\alpha^3\beta$ & 4c+ \\\hline
     $\alpha^4\beta$ & 4a--\\\hline
     $\alpha\beta^2$ & 0-- \\\hline
   $\alpha^2\beta^2$ & 2b+ \\\hline
   $\alpha^3\beta^2$ & 1a+ \\\hline
   $\alpha^4\beta^2$ & 3+  \\\hline
     $\alpha\beta^3$ & 4d+ \\\hline
   $\alpha^2\beta^3$ & 4a+ \\\hline
   $\alpha^3\beta^3$ & 4c--\\\hline
   $\alpha^4\beta^3$ & 1b+ \\\hline
  \end{tabular}
  \end{center}
  \caption{Элементы группы $\mathbb{G}_F$ и их классы\label{elt}}
\end{table}
Из этого и леммы~\ref{lemma4} выполняется $\mathbb{Z}_6\cap F_5=\{e\}$ и $\mathbb{G}=\mathbb{Z}_6F_5$.
%\begin{lemma_cub}
%В $\mathbb{G}_F$ классы разных элементов различаются.
%\end{lemma_cub}
%\begin{proof}
%Прежположим, что в группе есть элементы $x_1$ и $x_2$, принадлежащие одному подклассу. По лемме~\ref{lemma_classes} $x_2=kx_1$ для некоторого $k\in\mathbb{G}_{class~0}$. Тогда существуют $a,b,c,d\in \mathbb{G}_F$, такие, что $ab=x_1$ и $cd=x_2=kx_1$.
%$$cd=kab$$
%$$cdb^{-1}=ka=a'$$
%$a'$ находится в том же классе, что и $a$, и поэтому в группе ''свободен'' еще один класс.
%\end{proof}
%\end{lemma_cub}
%\begin{def_cub}
%Группа $G$ называется обобщенным произведением подгрупп $H,K\le G$, (обозначается $G=H \bowtie K$) если
%\begin{enumerate}
%\item $G\cap H=\{e\}$
%\item $\forall g \in G \exists! h \in H, k\in K: g=hk$
%\end{enumerate}
%\end{def_cub}
%$S_5=\mathbb{Z}_6\bowtie F_5$
%\textit{
%Дальше можно просто сказать, что в $S_6$ нет других групп порядка 120, кроме $S_5$, но это тоже нужно доказать, и кажется, у меня есть более интересное доказательство. Я пока не смог доказать все пункты, но я могу назвать его план.
%Что я хотел бы сделать:
%\begin{enumerate}
%\item Доказать, что каждый элемент в $\mathbb{G}_F$ принадлежит разным подклассам.
%\item Из леммы~\ref{lemma_classes} следует, что каждый элемент в нашей группе можно получить перемножением единственного элемента из $\mathbb{G}_{subclass~0}$ и единственного элемента в $\mathbb{G}_F$.
%\item Доказать, что $S_5=\mathbb{Z}_6\bowtie F_5$, где $G=H\bowtie K$ обозначает обобщенное полупрямое произведение, $H, K$~--- подгруппы в $G$, $H\cap K=\{e\}$ и $G=HK$.
%\end{enumerate}
%}
\begin{lemma_cub}
$S_5=\mathbb{Z}_6\bowtie F_5$, где $G=H\bowtie K$ обозначает обобщенное полупрямое произведение: $H, K$~--- подгруппы в $G$, $H\cap K=\{e\}$ и $G=HK$.
\end{lemma_cub}
\begin{proof}
$\mathbb{Z}_6$ и $F_5$~--- подгруппы в $S_5$ и $F_5$ разбивает множество элементов в $S_5$ на $[S_5:F_5]=6$ классов смежности. Будем обозначать их $K_0=K=F_5,\ldots,K_5$. Докажем, что из каждого смежного класса можно выбрать по одному элементу так, что они будут образовывать группу $\mathbb{Z}_6$. Из $K_0$ выберем нейтральный элемент. Верны следующие утверждения:
\begin{enumerate}
\item Если $x\in K_i$, то $x^{-1}\not\in K_i$,
\item $\forall i\not=0\exists j, k\not=i,k\not=j: (x_1\in K_i$, $x_2\in K_j\implies x_1x_2\in K_k)$.
\hspace{0.5cm}\\
\end{enumerate}

\begin{enumerate}
\item Предположим, что $xK=x^{-1}K$, тогда $$x^2K=K\text{,}$$ то есть единственные элементы, удовлетворяющие этому свойству, находятся в $K$.
\item
\begin{enumerate}
\item Предположим, что $x_1x_2K=x_1K$.
$$x_2K=K\text{,}$$
то есть единственные элементы, удовлетворяющие этому свойству, находятся в $K$, то есть элементов, отличных от единичного, в множестве нет.
\item Предположим, что $x_1x_2K=x_2K$
$$x_2^{-1}x_1x_2K=K$$
$$x_2^{-1}x_1x_2\in K$$
Так как рассуждения верны для произвольного $x_1\in K_i$, $K_i^{x_2^{-1}}=K_0$, то есть существует такой элемент $x\in K_i$, что $x_2^{-1}xx_2=e$, чего быть не может.
\end{enumerate}
\end{enumerate}
Теперь выберем какой-нибудь элемент порядка 6, тогда он порождает группу $\mathbb{Z}_6$ и все его степени принадлежат разным смежным классам по $F_5$.
\end{proof}
\end{document}
